# Библиотечный каталог FastAPI

API для управления библиотечным каталогом, реализованное с использованием FastAPI.

## Описание проекта

Проект представляет собой REST API для управления библиотечным каталогом. Он позволяет выполнять основные операции CRUD (создание, чтение, обновление, удаление) для книг.

## Функциональность

- Получение списка всех книг с возможностью фильтрации
- Получение информации о конкретной книге
- Добавление новой книги в каталог
- Обновление информации о книге
- Удаление книги из каталога

## Модель данных

Каждая книга содержит следующие данные:

- id (уникальный идентификатор)
- название
- автор
- год издания
- жанр
- количество страницs
- доступность (в наличии/выдана)
- обложка
- описание
- рейтинг

## Установка и запуск 
### Ознакомиться и использовать taskfile или по гайду ниже

1. Клонировать репозиторий
2. Создать виртуальное окружение и активировать его
   ```
   python -m venv .venv
   source .venv/bin/activate
   ```
3. Установить зависимости:
   ```
   pip install -r requirements.txt
   ```
4. Заполнение .env файла
   создать копию .env.example
   заполнить данными
   STORAGE_TYPE может быть jsonbin || db || file
 
5. Запустить приложение:
   ```
   python -m app.library_catalog.main
   ```
6. Открыть Swagger UI по адресу http://127.0.0.1:8000/docs

## Анализ способов хранения данных

### 1. Хранение в оперативной памяти

**Преимущества:**
- Высокая скорость работы
- Простота реализации
- Отсутствие внешних зависимостей

**Недостатки:**
- Данные теряются при перезапуске приложения
- Ограниченный объем данных (зависит от доступной памяти)
- Невозможность масштабирования (данные не синхронизируются между экземплярами приложения)
- Отсутствие резервного копирования и восстановления данных
- Проблемы с целостностью данных при сбоях приложения

**Проблемы:**
- Отсутствие персистентности: все данные теряются при перезапуске приложения
- Отсутствие атомарности операций и управления транзакциями
- Проблема масштабирования: в случае работы нескольких экземпляров приложения, каждый экземпляр будет иметь свою копию данных
- Отсутствие механизмов для обеспечения целостности данных

### 2. Хранение в JSON-файле

**Преимущества:**
- Простота реализации
- Персистентность данных между перезапусками
- Данные можно легко читать и редактировать вручную
- Отсутствие необходимости в дополнительных сервисах (базах данных)

**Недостатки:**
- Низкая производительность при большом объеме данных
- Ограниченные возможности для индексирования и поиска
- Отсутствие механизмов управления транзакциями
- Проблемы с конкурентным доступом (race conditions)
- Отсутствие встроенных механизмов для обеспечения целостности данных

**Проблемы конкурентного доступа:**
- При одновременном обращении нескольких клиентов к API могут возникать race conditions
- Отсутствие блокировок может привести к потере данных при одновременной записи
- Чтение и запись всего файла для каждой операции снижает производительность
- При сбоях во время записи данные могут быть повреждены

### 3. Хранение в базах данных (SQL/NoSQL)

**Преимущества:**
- ACID
- Высокая производительность и масштабируемость
- Поддержка сложных запросов
- Управление транзакциями и атомарность операций
- Механизмы для обеспечения целостности данных
- Индексация и оптимизация запросов
- Разграничение прав доступа
- Резервное копирование и восстановление данных

**Недостатки:**
- Более сложная инфраструктура и настройка
- Необходимость управления схемой данных (для SQL)
- Увеличение сложности развертывания
- Потенциальные проблемы с производительностью при неправильной конфигурации
- Дополнительные требования к ресурсам

## Вывод

Каждый способ хранения данных имеет свои преимущества и недостатки, и выбор зависит от конкретных требований проекта:

1. **Хранение в оперативной памяти** подходит для прототипов, тестирования или когда данные не требуют сохранения.

2. **Хранение в JSON-файле** является хорошим решением для небольших приложений с невысокой нагрузкой, когда требуется персистентность данных без использования внешних сервисов.

3. **Хранение в базах данных** является оптимальным решением для производственных приложений с высокой нагрузкой, требованиями к надежности и масштабируемости.

Если говорить про конкурентный доступ данных, то я бы привёл в пример ACID свойства, которые обеспечивают базы данных:
Эти свойства особенно важны при работе с конкурентным доступом, так как они предотвращают проблемы, возникающие при одновременном обращении нескольких пользователей к одним и тем же данным. В отличие от хранения в JSON-файлах, базы данных предоставляют встроенные механизмы блокировок, управления версиями и изоляции транзакций, что делает их намного более надежными для систем с высокой нагрузкой.
